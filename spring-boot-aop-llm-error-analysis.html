<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Spring Boot AOP ile dinamik API trace sistemi ve LLM ile otomatik hata analizi. Root cause detection ve observability.">
    <title>Spring Boot AOP + LLM: Otomatik Hata Analiz Sistemi | Remzi ≈ûahbaz Blog</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="post-styles.css">
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <span class="logo-bracket">&lt;</span>
                <span class="logo-text">Remzi</span>
                <span class="logo-bracket">/&gt;</span>
            </a>
            <div class="nav-links">
                <a href="../index.html#articles" class="nav-link">Makaleler</a>
                <a href="../index.html#about" class="nav-link">Hakkƒ±mda</a>
                <a href="https://github.com/remzisahbaz" target="_blank" class="nav-link">GitHub</a>
            </div>
        </div>
    </nav>

    <article class="post">
        <header class="post-header">
            <div class="post-meta-top">
                <a href="../index.html" class="back-link">‚Üê Geri</a>
                <span class="post-tag">Spring Boot + AI</span>
            </div>
            <h1 class="post-title">Spring Boot AOP + LLM: Otomatik Hata Analiz Sistemi</h1>
            <div class="post-meta">
                <span class="meta-item">Remzi ≈ûahbaz</span>
                <span class="meta-separator">‚Ä¢</span>
                <span class="meta-item">17 ≈ûubat 2026</span>
                <span class="meta-separator">‚Ä¢</span>
                <span class="meta-item">18 dk okuma</span>
            </div>
        </header>

        <div class="post-content">
            <p class="post-lead">
                Production'da bug'larƒ± debug etmek zaman alƒ±yor. Controller'dan service layer'a 
                kadar full call chain'i trace edip, toplanan hata loglarƒ±nƒ± LLM ile analiz ederek 
                otomatik root cause tespiti yapan bir sistem geli≈ütirdim. Spring Boot AOP + Ollama 
                kombinasyonu ile observability'yi bir √ºst seviyeye ta≈üƒ±dƒ±m.
            </p>

            <h2>Problem: Production Bug Debugging S√ºreci</h2>

            <p>
                Tipik bir production hata senaryosu ≈ü√∂yle geli≈üir:
            </p>

            <ol>
                <li>Kullanƒ±cƒ± hata bildiriyor</li>
                <li>Log dosyalarƒ±nƒ± manuel olarak tarƒ±yorsun</li>
                <li>Stack trace'den exception'ƒ± g√∂r√ºyorsun</li>
                <li>Ama hangi servisin, hangi metodu √ßaƒüƒ±rƒ±rken, hangi parametrelerle hata verdiƒüini bulamƒ±yorsun</li>
                <li>Log level'ƒ± DEBUG'a alƒ±p tekrar test ediyorsun</li>
                <li>Sorunu bulana kadar saatler harcƒ±yorsun</li>
            </ol>

            <p>
                Bu s√ºre√ß hem zaman alƒ±cƒ± hem de frustrating. √ñzellikle mikroservis mimarisinde 
                call chain birden fazla servisi kapsadƒ±ƒüƒ±nda, hata kaynaƒüƒ±nƒ± bulmak √ßok zorla≈üƒ±yor.
            </p>

            <h2>√á√∂z√ºm: AOP Tabanlƒ± Dynamic Tracing + AI Analysis</h2>

            <h3>Sistem Mimarisi:</h3>

            <ul>
                <li><strong>Spring AOP</strong>: Her method call'u intercept et, trace kaydet</li>
                <li><strong>Trace ID Correlation</strong>: Request'ten response'a kadar t√ºm call'larƒ± ili≈ükilendir</li>
                <li><strong>On-demand Activation</strong>: <code>x-trace-enable: true</code> header ile aktifle≈ütir</li>
                <li><strong>LLM Analysis</strong>: Toplanan trace'leri Ollama'ya g√∂nder, root cause tespit et</li>
                <li><strong>UI Dashboard</strong>: Sonu√ßlarƒ± g√∂rselle≈ütir</li>
            </ul>

            <h2>Implementation: Step by Step</h2>

            <h3>1. Trace Entity ve Model</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">java</span>
                    <span class="code-title">ApiTrace.java</span>
                </div>
                <pre><code>@Entity
@Table(name = "api_traces")
@Data
public class ApiTrace {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "trace_id", nullable = false, unique = true)
    private String traceId; // UUID for correlation
    
    @Column(name = "request_path")
    private String requestPath; // /api/declaration/save
    
    @Column(name = "http_method")
    private String httpMethod; // POST, GET, etc.
    
    @Column(name = "class_name")
    private String className; // com.example.DeclarationController
    
    @Column(name = "method_name")
    private String methodName; // saveDeclaration
    
    @Column(columnDefinition = "TEXT")
    private String parameters; // JSON serialized params
    
    @Column(columnDefinition = "TEXT")
    private String result; // Return value (if exists)
    
    @Column(columnDefinition = "TEXT")
    private String exception; // Exception message + stack trace
    
    @Column(name = "execution_time_ms")
    private Long executionTimeMs;
    
    @Column(name = "created_at")
    private LocalDateTime createdAt;
    
    @Column(name = "user_id")
    private String userId;
    
    @Column(name = "session_id")
    private String sessionId;
}</code></pre>
            </div>

            <h3>2. AOP Aspect Implementation</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">java</span>
                    <span class="code-title">ApiTraceAspect.java</span>
                </div>
                <pre><code>@Aspect
@Component
@Slf4j
public class ApiTraceAspect {

    @Autowired
    private ApiTraceRepository traceRepository;
    
    @Autowired
    private ObjectMapper objectMapper;
    
    private static final ThreadLocal<String> TRACE_ID = new ThreadLocal<>();

    // Intercept all Controller methods
    @Around("execution(* com.experilabs..controller..*(..))")
    public Object traceController(ProceedingJoinPoint joinPoint) throws Throwable {
        return traceMethod(joinPoint, "CONTROLLER");
    }

    // Intercept all Service methods
    @Around("execution(* com.experilabs..service..*(..))")
    public Object traceService(ProceedingJoinPoint joinPoint) throws Throwable {
        return traceMethod(joinPoint, "SERVICE");
    }

    // Intercept all Repository methods
    @Around("execution(* com.experilabs..repository..*(..))")
    public Object traceRepository(ProceedingJoinPoint joinPoint) throws Throwable {
        return traceMethod(joinPoint, "REPOSITORY");
    }

    private Object traceMethod(ProceedingJoinPoint joinPoint, String layer) throws Throwable {
        // Check if tracing is enabled via header
        HttpServletRequest request = 
            ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes())
                .getRequest();
        
        String traceHeader = request.getHeader("x-trace-enable");
        if (!"true".equalsIgnoreCase(traceHeader)) {
            // Tracing disabled, proceed normally (no performance impact)
            return joinPoint.proceed();
        }

        // Generate or reuse trace ID
        String traceId = TRACE_ID.get();
        if (traceId == null) {
            traceId = UUID.randomUUID().toString();
            TRACE_ID.set(traceId);
        }

        // Capture method info
        String className = joinPoint.getSignature().getDeclaringTypeName();
        String methodName = joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();

        ApiTrace trace = new ApiTrace();
        trace.setTraceId(traceId);
        trace.setClassName(className);
        trace.setMethodName(methodName);
        trace.setRequestPath(request.getRequestURI());
        trace.setHttpMethod(request.getMethod());
        trace.setUserId(getCurrentUserId());
        trace.setSessionId(request.getSession().getId());

        try {
            // Serialize parameters (sanitize sensitive data)
            trace.setParameters(sanitizeAndSerialize(args));
        } catch (Exception e) {
            trace.setParameters("Serialization failed: " + e.getMessage());
        }

        long startTime = System.currentTimeMillis();
        Object result = null;
        Exception exception = null;

        try {
            // Execute the actual method
            result = joinPoint.proceed();
            
            // Capture result (limit size)
            try {
                String resultJson = objectMapper.writeValueAsString(result);
                if (resultJson.length() > 5000) {
                    resultJson = resultJson.substring(0, 5000) + "... (truncated)";
                }
                trace.setResult(resultJson);
            } catch (Exception e) {
                trace.setResult("Result serialization failed");
            }
            
            return result;
            
        } catch (Exception e) {
            exception = e;
            
            // Capture full stack trace
            StringWriter sw = new StringWriter();
            e.printStackTrace(new PrintWriter(sw));
            trace.setException(sw.toString());
            
            throw e;
            
        } finally {
            long endTime = System.currentTimeMillis();
            trace.setExecutionTimeMs(endTime - startTime);
            trace.setCreatedAt(LocalDateTime.now());
            
            // Save trace asynchronously (don't block main flow)
            CompletableFuture.runAsync(() -> {
                try {
                    traceRepository.save(trace);
                    log.debug("Trace saved: {} - {}.{} ({}ms)",
                        traceId, className, methodName, trace.getExecutionTimeMs());
                } catch (Exception e) {
                    log.error("Failed to save trace", e);
                }
            });
            
            // Clean up ThreadLocal if this is the last method in chain
            if (layer.equals("CONTROLLER")) {
                TRACE_ID.remove();
            }
        }
    }

    private String sanitizeAndSerialize(Object[] args) throws JsonProcessingException {
        // Remove sensitive data (password, token, etc.)
        List<Object> sanitized = new ArrayList<>();
        for (Object arg : args) {
            if (arg == null) {
                sanitized.add(null);
            } else if (arg instanceof String) {
                String str = (String) arg;
                // Mask potential sensitive data
                if (str.length() > 100) {
                    sanitized.add(str.substring(0, 100) + "...");
                } else {
                    sanitized.add(str);
                }
            } else {
                sanitized.add(arg.getClass().getSimpleName() + "@" + 
                    Integer.toHexString(arg.hashCode()));
            }
        }
        return objectMapper.writeValueAsString(sanitized);
    }

    private String getCurrentUserId() {
        try {
            Authentication auth = SecurityContextHolder.getContext().getAuthentication();
            return auth != null ? auth.getName() : "anonymous";
        } catch (Exception e) {
            return "unknown";
        }
    }
}</code></pre>
            </div>

            <h3>3. LLM Error Analysis Service</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">java</span>
                    <span class="code-title">LlmErrorAnalysisService.java</span>
                </div>
                <pre><code>@Service
@Slf4j
public class LlmErrorAnalysisService {

    private static final String OLLAMA_API_URL = "http://localhost:11434/api/generate";
    private static final String MODEL = "mistral-small:24b";
    
    @Autowired
    private RestTemplate restTemplate;
    
    @Autowired
    private ObjectMapper objectMapper;
    
    @Autowired
    private ApiTraceRepository traceRepository;

    public ErrorAnalysisResult analyzeTrace(String traceId) {
        // Fetch all traces with this ID (full call chain)
        List<ApiTrace> traces = traceRepository.findByTraceIdOrderByCreatedAtAsc(traceId);
        
        if (traces.isEmpty()) {
            return ErrorAnalysisResult.notFound();
        }

        // Build context for LLM
        String traceContext = buildTraceContext(traces);
        
        // Prompt for LLM
        String prompt = String.format(
            "Analyze this API trace and identify the root cause of the error.\n\n" +
            "TRACE DATA:\n%s\n\n" +
            "Provide:\n" +
            "1. Root Cause (1-2 sentences)\n" +
            "2. Exact location (class + method)\n" +
            "3. Suggested fix (code snippet if possible)\n" +
            "4. Prevention tips\n\n" +
            "Format your response as JSON:\n" +
            "{\n" +
            "  \"rootCause\": \"...\",\n" +
            "  \"location\": \"ClassName.methodName\",\n" +
            "  \"suggestedFix\": \"...\",\n" +
            "  \"preventionTips\": [\"tip1\", \"tip2\"]\n" +
            "}",
            traceContext
        );

        try {
            // Call Ollama API
            Map<String, Object> request = new HashMap<>();
            request.put("model", MODEL);
            request.put("prompt", prompt);
            request.put("stream", false);
            request.put("format", "json");
            request.put("options", Map.of("temperature", 0.1)); // Low temp for factual analysis

            log.info("Sending trace {} to LLM for analysis", traceId);
            long startTime = System.currentTimeMillis();
            
            ResponseEntity<String> response = restTemplate.postForEntity(
                OLLAMA_API_URL,
                request,
                String.class
            );
            
            long duration = System.currentTimeMillis() - startTime;
            log.info("LLM analysis completed in {}ms", duration);

            // Parse LLM response
            JsonNode root = objectMapper.readTree(response.getBody());
            String llmOutput = root.get("response").asText();
            
            // Clean JSON (remove markdown fences if present)
            llmOutput = llmOutput.replaceAll("```json\\n?", "").replaceAll("```\\n?", "").trim();
            
            ErrorAnalysisResult result = objectMapper.readValue(llmOutput, ErrorAnalysisResult.class);
            result.setTraceId(traceId);
            result.setAnalysisTimeMs(duration);
            
            return result;
            
        } catch (Exception e) {
            log.error("LLM analysis failed for trace " + traceId, e);
            return ErrorAnalysisResult.error("Analysis failed: " + e.getMessage());
        }
    }

    private String buildTraceContext(List<ApiTrace> traces) {
        StringBuilder context = new StringBuilder();
        
        context.append("=== API CALL CHAIN ===\n\n");
        
        for (int i = 0; i < traces.size(); i++) {
            ApiTrace trace = traces.get(i);
            
            context.append(String.format("%d. %s.%s\n",
                i + 1,
                trace.getClassName(),
                trace.getMethodName()
            ));
            
            context.append(String.format("   Parameters: %s\n", trace.getParameters()));
            context.append(String.format("   Execution Time: %dms\n", trace.getExecutionTimeMs()));
            
            if (trace.getException() != null) {
                context.append(String.format("   ‚ùå EXCEPTION:\n%s\n", 
                    limitStackTrace(trace.getException(), 30))); // First 30 lines
            } else if (trace.getResult() != null) {
                context.append(String.format("   ‚úÖ Result: %s\n", 
                    trace.getResult().substring(0, Math.min(200, trace.getResult().length()))));
            }
            
            context.append("\n");
        }
        
        return context.toString();
    }

    private String limitStackTrace(String stackTrace, int maxLines) {
        String[] lines = stackTrace.split("\n");
        if (lines.length <= maxLines) {
            return stackTrace;
        }
        return String.join("\n", Arrays.copyOf(lines, maxLines)) + 
            "\n... (" + (lines.length - maxLines) + " more lines)";
    }
}

@Data
class ErrorAnalysisResult {
    private String traceId;
    private String rootCause;
    private String location;
    private String suggestedFix;
    private List<String> preventionTips;
    private Long analysisTimeMs;
    private String error;
    
    public static ErrorAnalysisResult notFound() {
        ErrorAnalysisResult result = new ErrorAnalysisResult();
        result.setError("Trace not found");
        return result;
    }
    
    public static ErrorAnalysisResult error(String message) {
        ErrorAnalysisResult result = new ErrorAnalysisResult();
        result.setError(message);
        return result;
    }
}</code></pre>
            </div>

            <h3>4. REST Controller</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">java</span>
                    <span class="code-title">TraceController.java</span>
                </div>
                <pre><code>@RestController
@RequestMapping("/api/trace")
@Slf4j
public class TraceController {

    @Autowired
    private ApiTraceRepository traceRepository;
    
    @Autowired
    private LlmErrorAnalysisService analysisService;

    @GetMapping("/{traceId}")
    public ResponseEntity<List<ApiTrace>> getTrace(@PathVariable String traceId) {
        List<ApiTrace> traces = traceRepository.findByTraceIdOrderByCreatedAtAsc(traceId);
        return ResponseEntity.ok(traces);
    }

    @GetMapping("/{traceId}/analyze")
    public ResponseEntity<ErrorAnalysisResult> analyzeTrace(@PathVariable String traceId) {
        ErrorAnalysisResult result = analysisService.analyzeTrace(traceId);
        
        if (result.getError() != null) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(result);
        }
        
        return ResponseEntity.ok(result);
    }

    @GetMapping("/recent")
    public ResponseEntity<List<ApiTrace>> getRecentErrors(
            @RequestParam(defaultValue = "20") int limit) {
        
        Pageable pageable = PageRequest.of(0, limit, Sort.by("createdAt").descending());
        List<ApiTrace> traces = traceRepository.findByExceptionIsNotNull(pageable);
        
        return ResponseEntity.ok(traces);
    }
}</code></pre>
            </div>

            <h2>Performance Optimization: On-Demand Tracing</h2>

            <p>
                AOP her method call'da √ßalƒ±≈üƒ±yor ama <strong>tracing sadece header ile aktifle≈üiyor</strong>. 
                Bu sayede production performansƒ± korunuyor:
            </p>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">0ms</div>
                    <div class="stat-label">Overhead (Trace Disabled)</div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-number">~5ms</div>
                    <div class="stat-label">Overhead (Trace Enabled)</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">~2s</div>
                    <div class="stat-label">LLM Analysis Time</div>
                </div>
            </div>

            <h3>Kullanƒ±m √ñrnekleri:</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">bash</span>
                    <span class="code-title">cURL Examples</span>
                </div>
                <pre><code># Normal request (no tracing)
curl -X POST http://localhost:8080/api/declaration/save \
  -H "Content-Type: application/json" \
  -d '{"data": "..."}'

# Request with tracing enabled
curl -X POST http://localhost:8080/api/declaration/save \
  -H "Content-Type: application/json" \
  -H "x-trace-enable: true" \
  -d '{"data": "..."}'

# Get trace details
curl http://localhost:8080/api/trace/{traceId}

# Analyze trace with LLM
curl http://localhost:8080/api/trace/{traceId}/analyze</code></pre>
            </div>

            <h2>Ger√ßek D√ºnya √ñrneƒüi: NullPointerException Root Cause</h2>

            <h3>Senaryo:</h3>
            <p>
                Kullanƒ±cƒ± beyanname kaydederken hata alƒ±yor. Trace ID: <code>a7f3c2d1-4b5e-9876-abcd-1234567890ef</code>
            </p>

            <h3>Trace Chain:</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">plaintext</span>
                    <span class="code-title">Call Chain</span>
                </div>
                <pre><code>1. DeclarationController.saveDeclaration
   Parameters: [DeclarationDTO@a1b2c3]
   Execution Time: 45ms
   ‚úÖ Result: Success

2. DeclarationService.save
   Parameters: [DeclarationDTO@a1b2c3]
   Execution Time: 42ms
   ‚ùå EXCEPTION: NullPointerException

3. CompanyService.validateCompany
   Parameters: [null]
   Execution Time: 2ms
   ‚ùå EXCEPTION: NullPointerException at line 85</code></pre>
            </div>

            <h3>LLM Analysis Result:</h3>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">json</span>
                    <span class="code-title">Error Analysis</span>
                </div>
                <pre><code>{
  "rootCause": "CompanyService.validateCompany received null parameter because DeclarationDTO.companyId was null. No null check before service call.",
  "location": "DeclarationService.save (line ~120)",
  "suggestedFix": "Add null check:\n\nif (dto.getCompanyId() == null) {\n    throw new ValidationException(\"Company ID is required\");\n}\ncompanyService.validateCompany(dto.getCompanyId());",
  "preventionTips": [
    "Add @NotNull validation on DeclarationDTO.companyId field",
    "Use Optional<Long> for nullable IDs",
    "Add unit test for null company scenario",
    "Enable JSR-303 validation in controller"
  ],
  "analysisTimeMs": 1850
}</code></pre>
            </div>

            <p>
                LLM sadece hatayƒ± bulmakla kalmadƒ±, <strong>fix √∂nerisi ve prevention tips</strong> de verdi! 
                Bu, junior developer'larƒ±n bile hƒ±zlƒ±ca problemi √ß√∂zmesini saƒülƒ±yor.
            </p>

            <h2>UI Dashboard (React Frontend)</h2>

            <p>
                Trace'leri ve LLM analizlerini g√∂rselle≈ütirmek i√ßin basit bir React dashboard geli≈ütirdim:
            </p>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">jsx</span>
                    <span class="code-title">TraceAnalyzer.jsx</span>
                </div>
                <pre><code>import React, { useState } from 'react';
import axios from 'axios';

export default function TraceAnalyzer() {
    const [traceId, setTraceId] = useState('');
    const [traces, setTraces] = useState([]);
    const [analysis, setAnalysis] = useState(null);
    const [loading, setLoading] = useState(false);

    const fetchTrace = async () => {
        setLoading(true);
        try {
            const response = await axios.get(`/api/trace/${traceId}`);
            setTraces(response.data);
        } catch (error) {
            console.error('Failed to fetch trace', error);
        }
        setLoading(false);
    };

    const analyzeTrace = async () => {
        setLoading(true);
        try {
            const response = await axios.get(`/api/trace/${traceId}/analyze`);
            setAnalysis(response.data);
        } catch (error) {
            console.error('Failed to analyze trace', error);
        }
        setLoading(false);
    };

    return (
        <div className="trace-analyzer">
            <h1>üîç API Trace Analyzer</h1>
            
            <div className="trace-input">
                <input
                    type="text"
                    value={traceId}
                    onChange={(e) => setTraceId(e.target.value)}
                    placeholder="Enter Trace ID..."
                />
                <button onClick={fetchTrace} disabled={loading}>
                    Fetch Trace
                </button>
                <button onClick={analyzeTrace} disabled={loading || !traces.length}>
                    ü§ñ Analyze with AI
                </button>
            </div>

            {traces.length > 0 && (
                <div className="call-chain">
                    <h2>üìû Call Chain</h2>
                    {traces.map((trace, idx) => (
                        <div key={trace.id} className={trace.exception ? 'trace-error' : 'trace-success'}>
                            <div className="trace-header">
                                <span className="trace-number">{idx + 1}</span>
                                <strong>{trace.className}.{trace.methodName}</strong>
                                <span className="trace-time">{trace.executionTimeMs}ms</span>
                            </div>
                            <div className="trace-params">
                                Parameters: <code>{trace.parameters}</code>
                            </div>
                            {trace.exception && (
                                <div className="trace-exception">
                                    ‚ùå Exception: <pre>{trace.exception}</pre>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            )}

            {analysis && (
                <div className="analysis-result">
                    <h2>ü§ñ AI Analysis</h2>
                    
                    <div className="analysis-section">
                        <h3>üîç Root Cause</h3>
                        <p>{analysis.rootCause}</p>
                    </div>

                    <div className="analysis-section">
                        <h3>üìç Location</h3>
                        <code>{analysis.location}</code>
                    </div>

                    <div className="analysis-section">
                        <h3>üí° Suggested Fix</h3>
                        <pre>{analysis.suggestedFix}</pre>
                    </div>

                    <div className="analysis-section">
                        <h3>üõ°Ô∏è Prevention Tips</h3>
                        <ul>
                            {analysis.preventionTips.map((tip, idx) => (
                                <li key={idx}>{tip}</li>
                            ))}
                        </ul>
                    </div>

                    <div className="analysis-meta">
                        Analysis completed in {analysis.analysisTimeMs}ms
                    </div>
                </div>
            )}
        </div>
    );
}</code></pre>
            </div>

            <h2>Production Deployment Considerations</h2>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Dikkat Edilecekler:</h3>
                <ul>
                    <li><strong>Database size</strong>: Trace'ler hƒ±zla b√ºy√ºyor, retention policy belirleyin (√∂rn: 7 g√ºn)</li>
                    <li><strong>Sensitive data</strong>: Password, token gibi bilgileri mutlaka sanitize edin</li>
                    <li><strong>Performance</strong>: Async save kullanƒ±n, main flow bloke etmeyin</li>
                    <li><strong>GDPR compliance</strong>: User data i√ßeren trace'leri anonim hale getirin</li>
                    <li><strong>LLM cost</strong>: Local Ollama kullanƒ±n, cloud LLM'e g√ºvenmeyin</li>
                </ul>
            </div>

            <div class="tips-box">
                <h3>‚úÖ Best Practices:</h3>
                <ul>
                    <li>Trace retention: 7 g√ºn (production), 30 g√ºn (staging)</li>
                    <li>Auto-cleanup job: Daily cron ile eski trace'leri sil</li>
                    <li>Index optimization: trace_id, created_at, exception √ºzerinde index</li>
                    <li>Circuit breaker: LLM analysis fail ederse fallback mechanism</li>
                    <li>Rate limiting: Trace save i≈ülemini limit'le (abuse prevention)</li>
                </ul>
            </div>

            <h2>Gelecek ƒ∞yile≈ütirmeler</h2>

            <h3>1. Distributed Tracing (OpenTelemetry)</h3>
            <p>
                Mikroservisler arasƒ± trace'leri OpenTelemetry ile ili≈ükilendireceƒüim. 
                B√∂ylece cross-service call chain'i de g√∂rebileceƒüiz.
            </p>

            <h3>2. Automatic Fix Application</h3>
            <p>
                LLM'in √∂nerdiƒüi fix'i otomatik olarak pull request a√ßacak ≈üekilde entegre edeceƒüim. 
                GitHub Actions ile CI/CD pipeline'a baƒülayacaƒüƒ±m.
            </p>

            <h3>3. Anomaly Detection</h3>
            <p>
                Trace pattern'lerini ML ile analiz edip anomaly detection yapacaƒüƒ±m. 
                √ñrn: Sudden spike in execution time ‚Üí Alert.
            </p>

            <h2>Sonu√ß</h2>

            <p>
                Spring Boot AOP + Local LLM kombinasyonu ile production debugging s√ºrecini devrim 
                niteliƒüinde iyile≈ütirdim:
            </p>

            <ul>
                <li>‚úÖ <strong>Full call chain visibility</strong>: Controller'dan repository'ye t√ºm flow g√∂r√ºn√ºr</li>
                <li>‚úÖ <strong>On-demand activation</strong>: Production performance etkilenmiyor</li>
                <li>‚úÖ <strong>AI-powered root cause detection</strong>: Otomatik hata analizi</li>
                <li>‚úÖ <strong>Actionable suggestions</strong>: Code fix + prevention tips</li>
                <li>‚úÖ <strong>$0 cost</strong>: Local Ollama, cloud API yok</li>
            </ul>

            <p>
                Debug s√ºresi saatlerden <strong>dakikalara</strong> d√º≈üt√º. Junior developer'lar bile 
                complex bug'larƒ± LLM yardƒ±mƒ±yla √ß√∂zebiliyor.
            </p>

            <div class="cta-box">
                <h3>Sorularƒ±nƒ±z mƒ± var?</h3>
                <p>
                    Spring AOP, LLM integration veya observability konularƒ±nda soru ve 
                    deneyimlerinizi benimle payla≈üabilirsiniz:
                    <a href="mailto:sahbazremzii@gmail.com">email</a> | 
                    <a href="https://linkedin.com/in/remzisahbaz090" target="_blank">LinkedIn</a>
                </p>
            </div>

            <div class="post-tags">
                <span class="tag-label">Etiketler:</span>
                <a href="#" class="tag">Spring Boot</a>
                <a href="#" class="tag">AOP</a>
                <a href="#" class="tag">LLM</a>
                <a href="#" class="tag">Observability</a>
                <a href="#" class="tag">Error Analysis</a>
                <a href="#" class="tag">Ollama</a>
            </div>
        </div>

        <footer class="post-footer">
            <div class="author-card">
                <div class="author-info">
                    <h3>Remzi ≈ûahbaz</h3>
                    <p>Software Engineer @ ExperiLabs</p>
                    <p class="author-bio">
                        Spring Boot, mikroservisler ve AI/LLM teknolojileriyle kurumsal √ß√∂z√ºmler geli≈ütiriyorum.
                    </p>
                </div>
                <div class="author-links">
                    <a href="https://github.com/remzisahbaz" target="_blank">GitHub</a>
                    <a href="https://linkedin.com/in/remzisahbaz090" target="_blank">LinkedIn</a>
                </div>
            </div>
        </footer>
    </article>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <div class="footer-logo">
                    <span class="logo-bracket">&lt;</span>
                    <span class="logo-text">Remzi</span>
                    <span class="logo-bracket">/&gt;</span>
                </div>
                <p class="footer-tagline">Kod, Mimari ve Mikroservisler</p>
            </div>
            <div class="footer-right">
                <p>&copy; 2026 Remzi ≈ûahbaz. T√ºm haklarƒ± saklƒ±dƒ±r.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
</body>
</html>
